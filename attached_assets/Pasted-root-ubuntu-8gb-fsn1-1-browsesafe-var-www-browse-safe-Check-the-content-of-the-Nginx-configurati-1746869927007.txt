root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# # Check the content of the Nginx configuration
cat /etc/nginx/sites-available/browse-safe.com
server {
    listen 80;
    server_name browse-safe.com www.browse-safe.com;
    # Logging
    access_log /var/log/nginx/browse-safe-access.log;
    error_log /var/log/nginx/browse-safe-error.log;
    # Proxy configuration
    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Extended timeouts
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# ^C
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# # Check Nginx error logs
sudo tail -n 50 /var/log/nginx/error.log
sudo tail -n 50 /var/log/nginx/browse-safe-error.log
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# ^C
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# # Restart Nginx
sudo systemctl restart nginx

# Check status
sudo systemctl status nginx
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: en>
     Active: active (running) since Sat 2025-05-10 09:35:31 UTC; 27ms ago
       Docs: man:nginx(8)
    Process: 13358 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_proc>
    Process: 13361 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (>
   Main PID: 13363 (nginx)
      Tasks: 3 (limit: 4540)
     Memory: 2.4M (peak: 2.6M)
        CPU: 26ms
     CGroup: /system.slice/nginx.service
             ├─13363 "nginx: master process /usr/sbin/nginx -g daemon on; maste>
             ├─13364 "nginx: worker process"
             └─13365 "nginx: worker process"

May 10 09:35:31 ubuntu-8gb-fsn1-1-browsesafe systemd[1]: Starting nginx.service>
May 10 09:35:31 ubuntu-8gb-fsn1-1-browsesafe systemd[1]: Started nginx.service >
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# # Restart Nginx
sudo systemctl restart nginx

# Check status
sudo systemctl status nginx
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: en>
     Active: active (running) since Sat 2025-05-10 09:36:55 UTC; 20ms ago
       Docs: man:nginx(8)
    Process: 13389 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_proc>
    Process: 13393 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (>
   Main PID: 13395 (nginx)
      Tasks: 3 (limit: 4540)
     Memory: 2.4M (peak: 2.6M)
        CPU: 31ms
     CGroup: /system.slice/nginx.service
             ├─13395 "nginx: master process /usr/sbin/nginx -g daemon on; maste>
             ├─13396 "nginx: worker process"
             └─13397 "nginx: worker process"

May 10 09:36:55 ubuntu-8gb-fsn1-1-browsesafe systemd[1]: Starting nginx.service>
May 10 09:36:55 ubuntu-8gb-fsn1-1-browsesafe systemd[1]: Started nginx.service >
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# curl http://localhost:5000/

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse-Safe - Website Security Scanner</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #f8f9fa;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 2rem;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #2563eb;
      text-decoration: none;
    }
    nav a {
      margin-left: 1.5rem;
      color: #4b5563;
      text-decoration: none;
    }
    .hero {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      padding: 3rem 1rem;
      border-radius: 0.5rem;
      margin-bottom: 3rem;
      text-align: center;
    }
    .search-form {
      display: flex;
      max-width: 600px;
      margin: 0 auto;
    }
    .search-form input {
      flex: 1;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      border: 2px solid white;
      border-radius: 0.25rem 0 0 0.25rem;
    }
    .search-form button {
      padding: 0.75rem 1.5rem;
      background-color: #ef4444;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 0 0.25rem 0.25rem 0;
      cursor: pointer;
    }
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    .feature-card {
      background-color: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .recent-scans {
      background-color: white;
      padding: 2rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      margin-bottom: 3rem;
    }
    .scan-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }
    .scan-card {
      background-color: #f8f9fa;
      padding: 1rem;
      border-radius: 0.25rem;
      border-left: 4px solid #3b82f6;
    }
    .scan-card.safe { border-left-color: #10b981; }
    .scan-card.suspicious { border-left-color: #f59e0b; }
    .scan-card.dangerous { border-left-color: #ef4444; }
    .status.safe { color: #10b981; }
    .status.suspicious { color: #f59e0b; }
    .status.dangerous { color: #ef4444; }
    footer {
      background-color: #f1f5f9;
      padding: 2rem 0;
      margin-top: 3rem;
      border-top: 1px solid #e9ecef;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="/" class="logo">Browse-Safe</a>
      <nav>
        <a href="/">Home</a>
        <a href="#features">Features</a>
        <a href="#about">About</a>
      </nav>
    </div>
  </header>
  <div class="container">
    <div class="hero">
      <h1>Is that website safe to visit?</h1>
      <p>Scan any domain for security threats, malicious content, and suspicious activity before you visit.</p>

      <div class="search-form">
        <input type="text" id="url-input" placeholder="Enter a website URL (e.g., example.com)">
        <button id="scan-button">Scan Now</button>
      </div>
    </div>
    <div id="server-status" class="server-status">
      Server Status: Checking...
    </div>
    <section id="features" class="features">
      <div class="feature-card">
        <h3>Domain Analysis</h3>
        <p>We examine domain age, registration details, and WHOIS information to determine the legitimacy of a website.</p>
      </div>
      <div class="feature-card">
        <h3>Malware Detection</h3>
        <p>Our system scans for malicious code, viruses, and other harmful software that could compromise your security.</p>
      </div>
      <div class="feature-card">
        <h3>Phishing Protection</h3>
        <p>Identify potential phishing attempts designed to steal your personal or financial information.</p>
      </div>
      <div class="feature-card">
        <h3>Blacklist Checking</h3>
        <p>We check if the domain appears on any security blacklists or has been reported for suspicious activity.</p>
      </div>
    </section>
    <section class="recent-scans">
      <h2>Recent Website Scans</h2>
      <div id="scans-container" class="scan-list">
        Loading recent scans...
      </div>
    </section>
  </div>
  <footer>
    <div class="container">
      <p>&copy; 2025 Browse-Safe. All rights reserved.</p>
      <p>A website security and trust verification service.</p>
    </div>
  </footer>
  <script>
    // Check server health
    fetch('/health')
      .then(response => response.json())
      .then(data => {
        const statusElement = document.getElementById('server-status');
        statusElement.textContent = 'Server Status: Online ✓';
        statusElement.style.color = '#10b981';
      })
      .catch(error => {
        const statusElement = document.getElementById('server-status');
        statusElement.textContent = 'Server Status: Offline ✗';
        statusElement.style.color = '#ef4444';
      });

    // Get recent scans
    fetch('/api/scans/recent')
      .then(response => response.json())
      .then(scans => {
        const container = document.getElementById('scans-container');

        if (!Array.isArray(scans) || scans.length === 0) {
          container.innerHTML = '<p>No recent scans found.</p>';
          return;
        }

        container.innerHTML = '';
        scans.forEach(scan => {
          const scanCard = document.createElement('div');
          scanCard.className = 'scan-card ' + (scan.status || 'safe');

          scanCard.innerHTML = `
            <h3>${scan.domain || scan.url}</h3>
            <p>Trust Score: ${scan.trustScore || scan.trust_score || 0}/100</p>
            <p>Status: <span class="status ${scan.status || 'safe'}">${(scan.status || 'Unknown').toUpperCase()}</span></p>
            <p>Scanned: ${new Date(scan.createdAt || scan.created_at || Date.now()).toLocaleString()}</p>
          `;

          container.appendChild(scanCard);
        });
      })
      .catch(error => {
        document.getElementById('scans-container').innerHTML = '<p>Failed to load recent scans.</p>';
      });

    // Handle scan button click
    document.getElementById('scan-button').addEventListener('click', () => {
      const urlInput = document.getElementById('url-input');
      const url = urlInput.value.trim();

      if (!url) {
        alert('Please enter a valid URL');
        return;
      }

      // Fetch scan results
      fetch(`/api/scans?url=${encodeURIComponent(url)}`)
        .then(response => response.json())
        .then(data => {
          alert(`Scan complete for ${url}!\nTrust Score: ${data.trust_score || data.trustScore}/100\nStatus: ${data.status.toUpperCase()}`);

          // Reload recent scans
          location.reload();
        })
        .catch(error => {
          alert('Error during scan. Please try again later.');
        });
    });
  </script>
</body>
</html>
  root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# sudo lsof -i :5000
COMMAND     PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
node\x20/ 13011 root   19u  IPv6  34851      0t0  TCP *:5000 (LISTEN)
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# pm2 status
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ browse-safe        │ fork     │ 2    │ online    │ 0%       │ 63.6mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
Module
┌────┬────────────────────┬──────────┬──────────┬──────────┐
│ id │ name               │ status   │ cpu      │ mem      │
├────┼────────────────────┼──────────┼──────────┼──────────┤
│ 1  │ pm2-logrotate      │ online   │ 0%       │ 58.2mb   │
└────┴────────────────────┴──────────┴──────────┴──────────┘
root@ubuntu-8gb-fsn1-1-browsesafe:/var/www/browse-safe# # Test HTTP response from the server
curl -v http://browse-safe.com
* Host browse-safe.com:80 was resolved.
* IPv6: (none)
* IPv4: 49.12.32.23
*   Trying 49.12.32.23:80...
* Connected to browse-safe.com (49.12.32.23) port 80
> GET / HTTP/1.1
> Host: browse-safe.com
> User-Agent: curl/8.5.0
> Accept: */*
>
< HTTP/1.1 200 OK
< Server: nginx/1.24.0 (Ubuntu)
< Date: Sat, 10 May 2025 09:38:12 GMT
< Content-Type: text/html; charset=UTF-8
< Content-Length: 7375
< Connection: keep-alive
< X-Powered-By: Express
< Accept-Ranges: bytes
< Cache-Control: public, max-age=0
< Last-Modified: Sat, 10 May 2025 09:21:27 GMT
< ETag: W/"1ccf-196b97fe0f0"
<

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse-Safe - Website Security Scanner</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      color: #333;
      background-color: #f8f9fa;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 2rem;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #2563eb;
      text-decoration: none;
    }
    nav a {
      margin-left: 1.5rem;
      color: #4b5563;
      text-decoration: none;
    }
    .hero {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      padding: 3rem 1rem;
      border-radius: 0.5rem;
      margin-bottom: 3rem;
      text-align: center;
    }
    .search-form {
      display: flex;
      max-width: 600px;
      margin: 0 auto;
    }
    .search-form input {
      flex: 1;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      border: 2px solid white;
      border-radius: 0.25rem 0 0 0.25rem;
    }
    .search-form button {
      padding: 0.75rem 1.5rem;
      background-color: #ef4444;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 0 0.25rem 0.25rem 0;
      cursor: pointer;
    }
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }
    .feature-card {
      background-color: white;
      padding: 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .recent-scans {
      background-color: white;
      padding: 2rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      margin-bottom: 3rem;
    }
    .scan-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }
    .scan-card {
      background-color: #f8f9fa;
      padding: 1rem;
      border-radius: 0.25rem;
      border-left: 4px solid #3b82f6;
    }
    .scan-card.safe { border-left-color: #10b981; }
    .scan-card.suspicious { border-left-color: #f59e0b; }
    .scan-card.dangerous { border-left-color: #ef4444; }
    .status.safe { color: #10b981; }
    .status.suspicious { color: #f59e0b; }
    .status.dangerous { color: #ef4444; }
    footer {
      background-color: #f1f5f9;
      padding: 2rem 0;
      margin-top: 3rem;
      border-top: 1px solid #e9ecef;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="/" class="logo">Browse-Safe</a>
      <nav>
        <a href="/">Home</a>
        <a href="#features">Features</a>
        <a href="#about">About</a>
      </nav>
    </div>
  </header>
  <div class="container">
    <div class="hero">
      <h1>Is that website safe to visit?</h1>
      <p>Scan any domain for security threats, malicious content, and suspicious activity before you visit.</p>

      <div class="search-form">
        <input type="text" id="url-input" placeholder="Enter a website URL (e.g., example.com)">
        <button id="scan-button">Scan Now</button>
      </div>
    </div>
    <div id="server-status" class="server-status">
      Server Status: Checking...
    </div>
    <section id="features" class="features">
      <div class="feature-card">
        <h3>Domain Analysis</h3>
        <p>We examine domain age, registration details, and WHOIS information to determine the legitimacy of a website.</p>
      </div>
      <div class="feature-card">
        <h3>Malware Detection</h3>
        <p>Our system scans for malicious code, viruses, and other harmful software that could compromise your security.</p>
      </div>
      <div class="feature-card">
        <h3>Phishing Protection</h3>
        <p>Identify potential phishing attempts designed to steal your personal or financial information.</p>
      </div>
      <div class="feature-card">
        <h3>Blacklist Checking</h3>
        <p>We check if the domain appears on any security blacklists or has been reported for suspicious activity.</p>
      </div>
    </section>
    <section class="recent-scans">
      <h2>Recent Website Scans</h2>
      <div id="scans-container" class="scan-list">
        Loading recent scans...
      </div>
    </section>
  </div>
  <footer>
    <div class="container">
      <p>&copy; 2025 Browse-Safe. All rights reserved.</p>
      <p>A website security and trust verification service.</p>
    </div>
  </footer>
  <script>
    // Check server health
    fetch('/health')
      .then(response => response.json())
      .then(data => {
        const statusElement = document.getElementById('server-status');
        statusElement.textContent = 'Server Status: Online ✓';
        statusElement.style.color = '#10b981';
      })
      .catch(error => {
        const statusElement = document.getElementById('server-status');
        statusElement.textContent = 'Server Status: Offline ✗';
        statusElement.style.color = '#ef4444';
      });

    // Get recent scans
    fetch('/api/scans/recent')
      .then(response => response.json())
      .then(scans => {
        const container = document.getElementById('scans-container');

        if (!Array.isArray(scans) || scans.length === 0) {
          container.innerHTML = '<p>No recent scans found.</p>';
          return;
        }

        container.innerHTML = '';
        scans.forEach(scan => {
          const scanCard = document.createElement('div');
          scanCard.className = 'scan-card ' + (scan.status || 'safe');

          scanCard.innerHTML = `
            <h3>${scan.domain || scan.url}</h3>
            <p>Trust Score: ${scan.trustScore || scan.trust_score || 0}/100</p>
            <p>Status: <span class="status ${scan.status || 'safe'}">${(scan.status || 'Unknown').toUpperCase()}</span></p>
            <p>Scanned: ${new Date(scan.createdAt || scan.created_at || Date.now()).toLocaleString()}</p>
          `;

          container.appendChild(scanCard);
        });
      })
      .catch(error => {
        document.getElementById('scans-container').innerHTML = '<p>Failed to load recent scans.</p>';
      });

    // Handle scan button click
    document.getElementById('scan-button').addEventListener('click', () => {
      const urlInput = document.getElementById('url-input');
      const url = urlInput.value.trim();

      if (!url) {
        alert('Please enter a valid URL');
        return;
      }

      // Fetch scan results
      fetch(`/api/scans?url=${encodeURIComponent(url)}`)
        .then(response => response.json())
        .then(data => {
          alert(`Scan complete for ${url}!\nTrust Score: ${data.trust_score || data.trustScore}/100\nStatus: ${data.status.toUpperCase()}`);

          // Reload recent scans
          location.reload();
        })
        .catch(error => {
          alert('Error during scan. Please try again later.');
        });
    });
  </script>
</body>
</html>
* Connection #0 to host browse-safe.com left intact
